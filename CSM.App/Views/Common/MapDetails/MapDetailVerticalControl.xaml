<UserControl x:Class="CSM.App.Views.Common.MapDetailVerticalControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:gl="clr-namespace:System.Globalization;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <!-- Title & Commands -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <!-- Title -->
            <TextBlock Text="Song Detail" Style="{StaticResource HeaderTitleStyle}" Foreground="#88018574" />
            <!-- Commands -->
            <telerik:RadToolBar Grid.Column="1" Style="{StaticResource HeaderToolBarStyle}" >
                <telerik:RadButton>
                    <telerik:RadGlyph Glyph="&#xe907;" Foreground="#88018574" />
                </telerik:RadButton>
                <telerik:RadButton>
                    <telerik:RadGlyph Glyph="&#xe945;" Foreground="#88018574" />
                </telerik:RadButton>
            </telerik:RadToolBar>
        </Grid>

        <!-- Content -->
        <Grid Grid.Row="1" Margin="3">
            <Grid.Resources>
                <Style TargetType="TextBlock">
                    <Setter Property="Foreground" Value="White" />
                </Style>
            </Grid.Resources>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <!-- Cover image -->
            <Image Source="{Binding CoverUrl}" HorizontalAlignment="Left" ToolTip="{Binding Description}" />

            <Grid Grid.Row="1" Margin="0,6,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <!-- BSR (Id) -->
                <TextBlock Text="BSR" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Text="{Binding Id}" />
                <!-- SongName -->
                <TextBlock Grid.Row="1" Text="Title" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding SongName}" TextWrapping="Wrap" />
                <!-- SongSubName -->
                <TextBlock Grid.Row="2" Text="Subtitle" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="2" Text="{Binding SongSubName}" TextWrapping="Wrap" />
                <!-- SongAuthorName -->
                <TextBlock Grid.Row="3" Text="Artist" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="3" Text="{Binding SongAuthorName}" TextWrapping="Wrap" />
                <!-- LevelAuthorName -->
                <TextBlock Grid.Row="4" Text="Mapper" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="4" Text="{Binding LevelAuthorName}" TextWrapping="Wrap" />
                <!-- Uploaded -->
                <TextBlock Grid.Row="5" Text="Uploaded" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="5" Text="{Binding Uploaded, StringFormat='g', ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}}" />
                <!-- Notes per minute -->
                <TextBlock Grid.Row="6" Text="Beats per minute" FontWeight="DemiBold"  />
                <TextBlock Grid.Column="1" Grid.Row="6" Text="{Binding Bpm}" />
                <!-- Duration -->
                <TextBlock Grid.Row="7" Text="Duration" FontWeight="DemiBold" />
                <StackPanel Grid.Column="1" Grid.Row="7" Orientation="Horizontal">
                    <TextBlock Text="{Binding Duration}" />
                    <TextBlock Text="seconds" Margin="3,0" />
                </StackPanel>
                <!-- Upvotes -->
                <TextBlock Grid.Row="8" Text="Upvotes" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="8" Text="{Binding Upvotes}" />
                <!-- Downvotes -->
                <TextBlock Grid.Row="9" Text="Downvotes" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="9" Text="{Binding Downvotes}" />
                <!-- Score -->
                <TextBlock Grid.Row="10" Text="Score" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="10" Text="{Binding Score}" />
                <!-- Ranked -->
                <TextBlock Grid.Row="11" Text="Ranked" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="11" Text="{Binding Ranked}" />
                <!-- Qualified -->
                <TextBlock Grid.Row="12" Text="Qualified" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="12" Text="{Binding Qualified}" />
                <!-- Tags -->
                <TextBlock Grid.Row="13" Text="Tags" FontWeight="DemiBold" />
                <TextBlock Grid.Column="1" Grid.Row="13" Text="{Binding Tags}" TextWrapping="Wrap" />
            </Grid>

            <ScrollViewer Grid.Row="3" Margin="0,10,0,0" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"  telerik:StyleManager.Theme="Windows11" >
                <ItemsControl ItemsSource="{Binding Difficulties}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                    <ContentControl Content="{Binding}" ContentTemplateSelector="{StaticResource CharacteristicDataTemplateSelector}" />
                                <Border Grid.Column="1" BorderThickness="0" BorderBrush="{Binding Difficulty, Converter={StaticResource DiffToColorConverter}}">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <LinearGradientBrush.RelativeTransform>
                                                <TransformGroup>
                                                    <ScaleTransform CenterY="0.5" CenterX="0.5"/>
                                                    <SkewTransform CenterX="0.5" CenterY="0.5"/>
                                                    <RotateTransform Angle="90" CenterX="0.5" CenterY="0.5"/>
                                                    <TranslateTransform/>
                                                </TransformGroup>
                                            </LinearGradientBrush.RelativeTransform>
                                            <GradientStop Color="{Binding Difficulty, Converter={StaticResource DiffToGradientStopColorConverter}}"/>
                                            <GradientStop Color="{Binding Difficulty, Converter={StaticResource DiffToGradientStartColorConverter}}" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Label}" HorizontalAlignment="left" FontWeight="Bold" VerticalAlignment="Center" Foreground="{Binding Difficulty, Converter={StaticResource DiffToColorConverter}}" Margin="6,0,0,0" />
                                        <TextBlock Grid.Column="1" Text="{Binding Stars}" FontWeight="DemiBold" VerticalAlignment="Center" Foreground="White" Margin="0,0,6,0" />
                                    </Grid>
                                </Border>
                                <Border Grid.ColumnSpan="2" Grid.Row="1" BorderThickness="1,0,1,1" BorderBrush="{Binding Difficulty, Converter={StaticResource DiffToColorConverter}}" Padding="3">
                                    <TextBlock Text="{Binding Infos}" Foreground="White" />
                                </Border>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl>
